<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Network Services 2 P3 MySQL - TryHackMe Walkthrough | Mr Ash Co</title>
<meta name=keywords content><meta name=description content="Welcome back to another video.
We are going to be doing Network Servicestwo, part three
enumerating exploiting more commonnetwork Services and misconfigs.
We’re up to task eight, nine and ten,
and we’ll finish off with elevenrounding out this whole thing.
Cool.
All right, let’s start off with taskeight, understanding MySQL.
Just before I do, got to remind you,
if you want a written write up,you can catch the link to that below."><meta name=author content="Mr Ash"><link rel=canonical href=//localhost:1313/tyryhackme-network-services-2-p3-mysql/><meta name=google-site-verification content="G-XL842W0SQL"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.5591f0f0e6da962274ad39d968be1ca571fe1593fa5f642efac68ccea21a574f.css integrity="sha256-VZHw8ObaliJ0rTnZaL4cpXH+FZP6X2Qu+saMzqIaV08=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href="https://p146.p4.n0.cdn.getcloudapp.com/items/Jrum0N6q/4ab8cbb7-d222-4c3c-963d-f0ec6c30568c.jpg?source=viewer&amp;v=db94595858aad20b777e4f130cbe5006"><link rel=icon type=image/png sizes=16x16 href=//localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=//localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=//localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=//localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=//localhost:1313/tyryhackme-network-services-2-p3-mysql/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-XL842W0SQL"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XL842W0SQL")}</script><meta property="og:title" content="Network Services 2 P3 MySQL - TryHackMe Walkthrough"><meta property="og:description" content="Welcome back to another video.
We are going to be doing Network Servicestwo, part three
enumerating exploiting more commonnetwork Services and misconfigs.
We’re up to task eight, nine and ten,
and we’ll finish off with elevenrounding out this whole thing.
Cool.
All right, let’s start off with taskeight, understanding MySQL.
Just before I do, got to remind you,
if you want a written write up,you can catch the link to that below."><meta property="og:type" content="article"><meta property="og:url" content="//localhost:1313/tyryhackme-network-services-2-p3-mysql/"><meta property="og:image" content="//localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-07-19T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-19T00:00:00+00:00"><meta property="og:site_name" content="Mr Ash Co"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="//localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Network Services 2 P3 MySQL - TryHackMe Walkthrough"><meta name=twitter:description content="Welcome back to another video.
We are going to be doing Network Servicestwo, part three
enumerating exploiting more commonnetwork Services and misconfigs.
We’re up to task eight, nine and ten,
and we’ll finish off with elevenrounding out this whole thing.
Cool.
All right, let’s start off with taskeight, understanding MySQL.
Just before I do, got to remind you,
if you want a written write up,you can catch the link to that below."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"//localhost:1313/post/"},{"@type":"ListItem","position":2,"name":"Network Services 2 P3 MySQL - TryHackMe Walkthrough","item":"//localhost:1313/tyryhackme-network-services-2-p3-mysql/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Network Services 2 P3 MySQL - TryHackMe Walkthrough","name":"Network Services 2 P3 MySQL - TryHackMe Walkthrough","description":"Welcome back to another video.\nWe are going to be doing Network Servicestwo, part three\nenumerating exploiting more commonnetwork Services and misconfigs.\nWe’re up to task eight, nine and ten,\nand we’ll finish off with elevenrounding out this whole thing.\nCool.\nAll right, let’s start off with taskeight, understanding MySQL.\nJust before I do, got to remind you,\nif you want a written write up,you can catch the link to that below.","keywords":[],"articleBody":" Welcome back to another video.\nWe are going to be doing Network Servicestwo, part three\nenumerating exploiting more commonnetwork Services and misconfigs.\nWe’re up to task eight, nine and ten,\nand we’ll finish off with elevenrounding out this whole thing.\nCool.\nAll right, let’s start off with taskeight, understanding MySQL.\nJust before I do, got to remind you,\nif you want a written write up,you can catch the link to that below.\nIf you’d like to subscribe or leavea comment, any feedback would be great.\nWith that being said,there was something else.\nAll part one and two are already posted,\nso if you’d like them,check the links or cards.\nCool.Now, task eight understanding MySQL.\nAll right.\nWhat is MySQL in the simplest definition,it is a relational database management\nsystem based on structured querylanguage SQL too many acronyms?\nYes.Database.\nA database is simply a persistentorganized collection of structured data.\nRDBMS Relationship Database ManagementSystem is a software or service used\nto create and manage databasesbased on a relational model.\nThe word relational just means\nthat the data stored in the dataset is organized as tables.\nCool.Good to know every table relates in\nsome way to each other’sprimary key or key factors.\nSo if you’ve done some like web\ndevelopment and that thiswill sort of make sense.\nI have been in the web design world,so more front end stuff.\nSo this is not that familiar for me.\nSo if you’re not that familiar with it,and cool if you are, please reach out.\nTeach me some stuff.Cool.\nMySQL is just a brand name,\none of the most popular softwareimplementations as we know it uses.\nMaybe I didn’t know a client server model,\nbut how do this clientand server communicate?\nThey use a language specifically SQL.\nMany other products such asPostgreSQL I have seen that.\nI’m pretty sure my DaVinci Resolve,\nMy video editing software usesthat to store all the projects.\nMicrosoft SQL, does anybody use that?\nIs that like really popular?\nProbably lots of legacy systems?\nI have no idea, I’m just guessinghave the word SQL in them.\nThe similar significance that the product\nis utilizing the structuredquery language syntax.\nAll right, how does MySQL work?\nMySQL\nas a Relationship Database Managementsystem is made up of the server\nand utility programs that helpin the administration of the databases.\nThe server handles all database\ninstructions like creating editing,accessing tables, takes managers and these\nrequests and communicatesthem to MySQL protocol.\nUsing the MySQL protocol,this whole process can be broken down\ninto three steps MySQL createsthe databases for storing,\nmanipulating data and definingthe relationship of each table.\nTwo clients make requests by makingspecific statements in SQL.\nAnd then three, the server will respond\nto the client with whateverinformation has been requested.\nSo I guess we’ll be learning about likeSQL injection where we can essentially\nfeed in something else and it willrespond back with whatever we ask.\nSo yeah, it’s crazy.\nReally interesting.\nSo it runs it so it runs various platforms\nlike Linux, Windows,most commonly in the back end of databases\nfor prominent websites in forms of somecentral components in the lampstack,\nwhich is something,something and something can’t remember,\nwhich includes oh, here we go, linux,Apache, MySQL and PHP, obviously.\nJust kidding, I know what a lampstack is.\nOkay, so here are some resourcesthat explain technical so cool.\nMore stuff to read another time.\nWhat type of software isMySQL and the full thing.\nSo we got relationaldatabase management system.\nI bet I said relationshipwhen I said it fast, not can’t remember.\nWhat language is MySQL based on?\nSo s and a Q and an L.\nWhat communication model does MySQL use?\nSo I think it’s the same as the others,\nwhich was the client server model,but I am prepared to be very wrong.\nWow, I am not.\nWhat is a common application of MySQL?\nA common application of MySQL.\nThis is another product of SQL, not MySQL.\nWhat is a common application?\nMaybe the Mic.\nNo, that wasn’t right.\nIt’s a common application.\nI don’t remember reading an application.\nLet’s just the only time the wordapplication has been used, a database.\nSo we got a database,\nbut that’s not really SQLmodel, but the user language specified.\nThe lampstack is implementationof MySQL, but not a database.\nBit of a stumper,\nI’m not sure on that one.\nOkay, what major social networkuses MySQL as their back end?\nI actually remember this from when I wentthrough it was Facebook\nand yeah, you can just look that upand you can find it pretty fast.\nAll right, what is a common application?\nOh my God.\nI do not know.\nFeel free to leave this video whileread everything again.\nBack end database.\nThat’ll be it.\nThis trips me out.The term application trips me out because\nI always think of like a reallyfront facing application.\nBut a database\nis a program is an application too,so back end database, awesome.\nI did forget to start that up.\nSo I’m going to press that now.\nSo that will take 60 seconds.\nSo we’re going to do another port scan\nand we’re going to be tryingto find out some information.\nBut I’ll start reading and then wecan do a port scan once that’s up.\nSo before we begin, let’s deploy the room.\nGive it some time.\nMySQL is likely not going to be the first\npoint of call when getting initialinformation about the server.\nYou can as always and we have previoustasks attempt to brute force default\naccount passwords if you reallydon’t have any information.\nHowever, in most CTF scenarios,\nthis is unlikely to be the avenueyou want to pursue the scenario.\nTypically you will have gained someinitial credentials from enumerating other\nservices that you can then enumerateand exploit my SQL services\nas this room focuses on exploitingand enumerating the network services.\nFor the sake of the scenario,\nwe’re going to assume that you havefound credentials, root and password.\nCool.So that’s just instead of them creating\na whole series of other steps that we haveto do to find root and password,\ngive it to us while enumeratingsubdomains on a web server.\nAfter trying to log in against SSH,\nunsuccessfully, you decideto try it against MySQL.\nCool.So requirements.\nYou’ll have MySQLinstalled on your system.\nSo let’s see if we havegoing to run MySQL.\nOkay, we’re using Metasploit,\nbut we do have MySQL installed, so wecan just see that by coming up green.\nSo that’s cool.\nSo we do a quick port scan thistime around on our system.\nSo I’m just going to go Nmap this time.\nI’m actually just going to get rid of this\nPP because we’re essentiallybeing handed a lot of information.\nSo we need to do thisa little bit quicker.\nSo not going to scan all the ports,honestly.\nProbably didn’t even need to dothe A for scripts and that.\nSo I’ve already got 3306,\nand since it’s four digits,I’m assuming that’s what we’re after.\nSo I’m just going to let that runanyway and come over here.\nSo great.So let’s go MySQL H.\nSo we have an IP ratherpaste that in there the username.\nSo we’ve been given that username,which was root and then P.\nNow it doesn’t say we have a password,\nwhich was password commands G.\nCool.\nSo we’re not in aLinux shell or bash shell.\nRather we’re in MySQL this time around.\nSo I don’t know, thingslike terminal who am I?\nKind of work.\nDifferent.\nOkay, cool.\nSo our scan had finished anyway,so we can just cut that out and crap.\nSo we just got the MySQLon 3306 and the SSH.\nSo yeah.\nAll right, cool.\nOkay, now we have ourlogin credentials work.\nLet’s quit out of the section here.\nSo I’m just going to leave that inthe background and launch Metasploit.\nSo remember MSF console.\nSo we’re going to be usingMySQL underscore SQL module.\nI’m just going to copy that and we’re\ngoing to search for it and thensee if we can make sure if we’re going\nto create a payload,we might be creating a payload to copy,\npaste and execute hereto receive a reverse shell.\nSo we’ll see what the roomhas installed for us.\nSo when I search that, so we onlygot one option that matches it.\nSo we can copy that in and submit that.So we got that.\nCool.So hint is separated by things.\nYes.\nSo that’s not right.\nSo we don’t want the full auxiliary.\nIs that what you’re after?\nOkay, let’s just read this again.\nSearch for select list options.\nWhat three options dowe need to set first?\nOh, sorry, it’s not asking us for that.\nSo let’s just use zero and let’sjust look up our options.\nSo we’ve got one, two, three.\nSo we’ve got our hosts.\nWe’re saying we might need to do other\nones like ourhosts password and then user.\nUsername.\nThat in order.\nThat was not in order.\nOkay, so that’s what it wants.\nJust sort of guessing there.\nSo we got to set the password,which we know is password when you set our\nhosts IP,we don’t need to set the R port because\nI assume that this is the default portjust because it’s the same here.\nWe don’t need to specify the versionof SQL even though it is required.\nI guess there’s probably\nlet’s do this by specifying passwordand that will just be lower case password\nand we’re going to set our hostand that’s going to be our IP.\nSo just paste that in to the system\nthat we’re looking at and then setuser name and that’s going to be root.\nOkay, so we should just be able to go run.\nBut before I do that,\nrun the exploit by defaultto test with the select version command.\nWait.Did I misunderstand this?\nIs this the SQL to execute?\nI understand this is not asking\nfor a version, this is actuallyan SQL command that will be executed.\nSo if we run this, we should get back theversion that it’s running because it ran.\nSo we can essentially now run any SQL.\nSo we just need to find the right SQL.So what does it give us?\nSo it gave us this back.\nCool, great.\nWe know that our exploitis landing as planned.\nLet’s try to gain someambitious information.\nChange the SQL option to show databases,\nset SQL to show databasesand then we’ll run it again.\nAnd how many databases are returned?\nSo we’ve got 1234.\nCool.Let’s move over to our last task.\nTask ten for exploitingMySQL So what do we know?\nLet’s take a sanity check before movingon to try and exploit the database fully\nand gain more sense of information on thedatabase than just the database names.\nI just want to take a second because I do\nreally like how it’s sort ofbefore it’s teaching us\nto really understand what we’redoing to enumerate and then exploit.\nBut I just like this last step before we\nexport exploit it’s just like justmake sure we’ve got everything.\nI think this is going to be good foronce I’m more experienced down the track.\nJust you get used to everything and it’sjust good to take your time, I guess.\nMySQL server credentials.\nSo root password,the version of MySQL running.\nSo we’ve got that here.\nAnd then the numberof databases and their names.\nI’ve got idea.\nSo it’s probably I shouldreally be keeping a list.\nWhere is this?\nSo if we just change into documents here,\nwe might just create awhat did I call the last one?\nI think I just call it MySQL Ssql.\nAnd I’m just going to copysome of this information over.\nSo I should be doing thisa lot more basically.\nBut how do I undo?Was it alt?\nSaid no, can’t remember.\nHow alt a I can’t remember howto whatever, I’ll just leave it cool.\nSo that’s pretty much we need this.\nAnd I mean, of course we’vegot root and then password.\nI think I can remember that,but that’s kind of it.\nSo in my scale, physicallya schema is key terminology.\nSo we’re just goingto learn some key times.\nSchema.\nA schema is synonymous with the database.\nYou can substitute the keyword schemainstead of database in my SQL syntax,\nfor example, using create schemainstead of create database.\nIt’s important to understand\nthe relationship because some otherdatabases products draw a distinction.\nFor example, in the Oracle databaseproduct, a schema represents only a part\nof a database, the tables and theobjects owned by a single user.\nThat’s really confusing.\nI’ve never understoodschema, to be honest.\nLike saying it’s like a database.\nI’m like, okay, because I know like in SEO\nworld, like the Google and stuff, schemais important but never really got it.\nHashes.I have a little bit of understanding about\nso very simple productof cryptographic algorithm.\nA cryptographic algorithm to turn\na variable length into an inputfixed length output.\nSo in SQL, hashes can bevery in different ways.\nFor instance, an indexdata into a hash table.\nEach unique hash has a unique ID thatserves as a pointer to the original data.\nThis creates an index that issignificantly smaller than the original\ndata, allowing the values to besearched and accessed more efficiently.\nThat’s interesting.\nSo I always associate hasheswith password, hashing and security.\nBut it also can just be used for a methodof searching and accessing efficiently.\nHowever, the data we’re going to beextracting our password hashes,\nwhich are simply a way of storingpasswords and not in plain text form.\nLet’s start cracking.\nAll right, let’s searchfor my SQL schema dump module.\nSo we’ll go search paste that in there.\nIt should be the only one.\nSo we can just go use zero.\nSo we’ve selected our tool here, but it’sgoing to ask what is the full path?\nWe can just chuck that in there.\nGreat, now we’ve done a few times by now.\nSo let’s take it from here.\nSet the relevant options, run the exploit.\nWhat’s the name of the last database?\nWe don’t need to oh wait, no,it said set the relevant options.\nOkay, so let’s have a set display.Results are true.\nSo we’re going to set password.\nSo that’s just going to be password set\nour hosts, which is just goingto be our IP that we’re targeting.\nAnd then set username,which is just going to be root.\nThat is our exploit machine set up.\nSo we can just hit run.\nI guess schema dump is like database dump.\nSo it’s just going to try and findall the info from the databases.\nWhat’s the name of the lasttable that gets dumped?\nSo when you’re looking for the last table\nI don’t know if there’s likea verbose mode in Metasploit.\nGoing to save this off, by the way,\njust so I got some stuff here.Yes.\nCool.Here we go.\nLet’s have a good old scroll.\nSo there’s a lotI’m not going to scroll all the way\nto the top, but we just wantthe name of the last table.\nSo table name.\nSo we’ve got here, I’m going to assume,\nincluding X and paste that in therewaits global by latency.\nSo I have no idea whatthis SQL database is.\nAwesome.\nNow you have dumped tables and columns,names of the whole database.\nBut we can do better.\nLet’s search and selectMySQL hash dump module.\nOh my gosh.\nHow many things are in thistool that we can use?\nSo what’s the module full name?\nI’m sort of realizing there’sprobably like variables.\nI keep seeing this.You can use variables.\nI wonder if you can setlike a variable of IP.\nSo if I like, setour host to IP,\nbut I set this as my IP so I don’thave to copy paste this every time.\nIt’s probably much more efficient ways ofdoing everything that I do the wrong way.\nAgain.I’ll learn them eventually.\nAgain, I’ll let you take it from here.\nSet the relevant options.\nSo let’s go up.\nSo we’ve got password.\nSo set password.\nSo that was password.\nCool.\nSorry.\nWhat am I doing?\nSet our host to this fella.\nAnd then we want to setthe username username to root.\nCool.So that’s set up.\nAnd then we should just be able to go run\nand it’s going to say, cool,that was a lot faster.\nSo we’re getting users and hashes.\nWell, that’s cool.\nHash dump is what?\nNon default user stands out.\nCarl.\nCarl stands out.\nSo another user.\nAnother user.\nYeah, we got rudeand we have the password hash.\nThis could be very interesting.\nCopy the hash to string,like full it’ll, copy this whole thing.\nAnd we can just nano a fileand copy it in there.\nBut we can also echo this file.\nIs that how that works?\nThat’s not how it works.\nAnd paste it in here.\nSo we’ve got Carl and thenwe’ve got the hash.\nSo one is like bob and then the hash.\nSo we’ve got thatand I just called it hash.\nYeah.\nSo if we cut out hash, we’ve got this.\nWe’re going to use John the river.\nSo what is the user hash combination?\nSo we can justcopy that in there like so sweet.\nRemember the hash col hash.Got it.\nOkay, now we need to crack.\nLet’s use John the Ripper against this.\nIt’s just saying John.\nBut I thought oh, really?\nThat was a lot easier.\nI thought we need to use a wordlist.\nI thought we needed to also usesomething else.\nCool.Awesome.\nPassword reuse is extremely dangerous,but extremely common.\nWhat are the chances\nthat we can use a different service likeSSH because SSH was running.\nSo we can go Carl and we goat and we can log into this user.\nYes please.And then we can go.\nD-O-G-G-I-E for doggie.\nAnd we can log in, hopefully,\nso we can cut out my SQL tax and wehave got our final flag puzzle.\nPaste that in there and goover to task eleven.\nWe got some further reading, add to thelist and we can complete our final task.\nAwesome.Good work.\nWe did it.Yeah.\nSo well done.Congrats.\nThat’s network services too.\nWe learned a lot from NFS SMTP to MySQL,\nplus the Network Services one that we did,which is pretty awesome.\nSo lots of stuff here,so I hope you took some notes.\nYou’ve always got this videoto come back into if you’d like.\nIf you want to see more of this,please let me know.\nLeave a comment if you want to subscribe.Awesome.\nIf you’d like to like the videoor dislike, totally up to you.\nEither way, just let me know what you liketo dislike, would love some feedback.\nIf you have any comments that you like\nto make, please go down below and there’llbe a playlist for all of my other\ntriathlon walkthroughs ifyou aren’t interested.\nAnd don’t forget if you want a written\nright up or you would like to subscribeto my newsletter,\nI do have a good newsletter that I put outmonthly and that’ll be linked below too.\nCool.That being said, have a good day.\nI’ll see you in the next one.\n","wordCount":"3155","inLanguage":"en","datePublished":"2022-07-19T00:00:00Z","dateModified":"2022-07-19T00:00:00Z","author":{"@type":"Person","name":"Mr Ash"},"mainEntityOfPage":{"@type":"WebPage","@id":"//localhost:1313/tyryhackme-network-services-2-p3-mysql/"},"publisher":{"@type":"Organization","name":"Mr Ash Co","logo":{"@type":"ImageObject","url":"https://p146.p4.n0.cdn.getcloudapp.com/items/Jrum0N6q/4ab8cbb7-d222-4c3c-963d-f0ec6c30568c.jpg?source=viewer\u0026v=db94595858aad20b777e4f130cbe5006"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=//localhost:1313/ accesskey=h title="mrashco (Alt + H)">mrashco</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=//localhost:1313/post title=posts><span>posts</span></a></li><li><a href=//localhost:1313/note title=notes><span>notes</span></a></li><li><a href=//localhost:1313/letter title=letters><span>letters</span></a></li><li><a href=//localhost:1313/search title=" (Alt + /)" accesskey=/><span><svg xmlns="http://www.w3.org/2000/svg" width="17.5" height="17.5" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=//localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=//localhost:1313/post/>Posts</a></div><h1 class=post-title>Network Services 2 P3 MySQL - TryHackMe Walkthrough<sup><span class=entry-isdraft>&nbsp;&nbsp;[draft]</span></sup></h1><div class=post-meta><span title='2022-07-19 00:00:00 +0000 UTC'>19/07/2022</span>&nbsp;·&nbsp;15 min&nbsp;·&nbsp;3155 words&nbsp;·&nbsp;Mr Ash&nbsp;|&nbsp;<a href=https://github.com/mrashco/mrash.co/tree/main/content/post/2022/thm-ns2-mysql.md rel="noopener noreferrer" target=_blank>Suggest Edits</a></div></header><div class=post-content><p>Welcome back to another video.</p><p>We are going to be doing Network Servicestwo, part three</p><p>enumerating exploiting more commonnetwork Services and misconfigs.</p><p>We’re up to task eight, nine and ten,</p><p>and we’ll finish off with elevenrounding out this whole thing.</p><p>Cool.</p><p>All right, let’s start off with taskeight, understanding MySQL.</p><p>Just before I do, got to remind you,</p><p>if you want a written write up,you can catch the link to that below.</p><p>If you’d like to subscribe or leavea comment, any feedback would be great.</p><p>With that being said,there was something else.</p><p>All part one and two are already posted,</p><p>so if you’d like them,check the links or cards.</p><p>Cool.Now, task eight understanding MySQL.</p><p>All right.</p><p>What is MySQL in the simplest definition,it is a relational database management</p><p>system based on structured querylanguage SQL too many acronyms?</p><p>Yes.Database.</p><p>A database is simply a persistentorganized collection of structured data.</p><p>RDBMS Relationship Database ManagementSystem is a software or service used</p><p>to create and manage databasesbased on a relational model.</p><p>The word relational just means</p><p>that the data stored in the dataset is organized as tables.</p><p>Cool.Good to know every table relates in</p><p>some way to each other’sprimary key or key factors.</p><p>So if you’ve done some like web</p><p>development and that thiswill sort of make sense.</p><p>I have been in the web design world,so more front end stuff.</p><p>So this is not that familiar for me.</p><p>So if you’re not that familiar with it,and cool if you are, please reach out.</p><p>Teach me some stuff.Cool.</p><p>MySQL is just a brand name,</p><p>one of the most popular softwareimplementations as we know it uses.</p><p>Maybe I didn’t know a client server model,</p><p>but how do this clientand server communicate?</p><p>They use a language specifically SQL.</p><p>Many other products such asPostgreSQL I have seen that.</p><p>I’m pretty sure my DaVinci Resolve,</p><p>My video editing software usesthat to store all the projects.</p><p>Microsoft SQL, does anybody use that?</p><p>Is that like really popular?</p><p>Probably lots of legacy systems?</p><p>I have no idea, I’m just guessinghave the word SQL in them.</p><p>The similar significance that the product</p><p>is utilizing the structuredquery language syntax.</p><p>All right, how does MySQL work?</p><p>MySQL</p><p>as a Relationship Database Managementsystem is made up of the server</p><p>and utility programs that helpin the administration of the databases.</p><p>The server handles all database</p><p>instructions like creating editing,accessing tables, takes managers and these</p><p>requests and communicatesthem to MySQL protocol.</p><p>Using the MySQL protocol,this whole process can be broken down</p><p>into three steps MySQL createsthe databases for storing,</p><p>manipulating data and definingthe relationship of each table.</p><p>Two clients make requests by makingspecific statements in SQL.</p><p>And then three, the server will respond</p><p>to the client with whateverinformation has been requested.</p><p>So I guess we’ll be learning about likeSQL injection where we can essentially</p><p>feed in something else and it willrespond back with whatever we ask.</p><p>So yeah, it’s crazy.</p><p>Really interesting.</p><p>So it runs it so it runs various platforms</p><p>like Linux, Windows,most commonly in the back end of databases</p><p>for prominent websites in forms of somecentral components in the lampstack,</p><p>which is something,something and something can’t remember,</p><p>which includes oh, here we go, linux,Apache, MySQL and PHP, obviously.</p><p>Just kidding, I know what a lampstack is.</p><p>Okay, so here are some resourcesthat explain technical so cool.</p><p>More stuff to read another time.</p><p>What type of software isMySQL and the full thing.</p><p>So we got relationaldatabase management system.</p><p>I bet I said relationshipwhen I said it fast, not can’t remember.</p><p>What language is MySQL based on?</p><p>So s and a Q and an L.</p><p>What communication model does MySQL use?</p><p>So I think it’s the same as the others,</p><p>which was the client server model,but I am prepared to be very wrong.</p><p>Wow, I am not.</p><p>What is a common application of MySQL?</p><p>A common application of MySQL.</p><p>This is another product of SQL, not MySQL.</p><p>What is a common application?</p><p>Maybe the Mic.</p><p>No, that wasn’t right.</p><p>It’s a common application.</p><p>I don’t remember reading an application.</p><p>Let’s just the only time the wordapplication has been used, a database.</p><p>So we got a database,</p><p>but that’s not really SQLmodel, but the user language specified.</p><p>The lampstack is implementationof MySQL, but not a database.</p><p>Bit of a stumper,</p><p>I’m not sure on that one.</p><p>Okay, what major social networkuses MySQL as their back end?</p><p>I actually remember this from when I wentthrough it was Facebook</p><p>and yeah, you can just look that upand you can find it pretty fast.</p><p>All right, what is a common application?</p><p>Oh my God.</p><p>I do not know.</p><p>Feel free to leave this video whileread everything again.</p><p>Back end database.</p><p>That’ll be it.</p><p>This trips me out.The term application trips me out because</p><p>I always think of like a reallyfront facing application.</p><p>But a database</p><p>is a program is an application too,so back end database, awesome.</p><p>I did forget to start that up.</p><p>So I’m going to press that now.</p><p>So that will take 60 seconds.</p><p>So we’re going to do another port scan</p><p>and we’re going to be tryingto find out some information.</p><p>But I’ll start reading and then wecan do a port scan once that’s up.</p><p>So before we begin, let’s deploy the room.</p><p>Give it some time.</p><p>MySQL is likely not going to be the first</p><p>point of call when getting initialinformation about the server.</p><p>You can as always and we have previoustasks attempt to brute force default</p><p>account passwords if you reallydon’t have any information.</p><p>However, in most CTF scenarios,</p><p>this is unlikely to be the avenueyou want to pursue the scenario.</p><p>Typically you will have gained someinitial credentials from enumerating other</p><p>services that you can then enumerateand exploit my SQL services</p><p>as this room focuses on exploitingand enumerating the network services.</p><p>For the sake of the scenario,</p><p>we’re going to assume that you havefound credentials, root and password.</p><p>Cool.So that’s just instead of them creating</p><p>a whole series of other steps that we haveto do to find root and password,</p><p>give it to us while enumeratingsubdomains on a web server.</p><p>After trying to log in against SSH,</p><p>unsuccessfully, you decideto try it against MySQL.</p><p>Cool.So requirements.</p><p>You’ll have MySQLinstalled on your system.</p><p>So let’s see if we havegoing to run MySQL.</p><p>Okay, we’re using Metasploit,</p><p>but we do have MySQL installed, so wecan just see that by coming up green.</p><p>So that’s cool.</p><p>So we do a quick port scan thistime around on our system.</p><p>So I’m just going to go Nmap this time.</p><p>I’m actually just going to get rid of this</p><p>PP because we’re essentiallybeing handed a lot of information.</p><p>So we need to do thisa little bit quicker.</p><p>So not going to scan all the ports,honestly.</p><p>Probably didn’t even need to dothe A for scripts and that.</p><p>So I’ve already got 3306,</p><p>and since it’s four digits,I’m assuming that’s what we’re after.</p><p>So I’m just going to let that runanyway and come over here.</p><p>So great.So let’s go MySQL H.</p><p>So we have an IP ratherpaste that in there the username.</p><p>So we’ve been given that username,which was root and then P.</p><p>Now it doesn’t say we have a password,</p><p>which was password commands G.</p><p>Cool.</p><p>So we’re not in aLinux shell or bash shell.</p><p>Rather we’re in MySQL this time around.</p><p>So I don’t know, thingslike terminal who am I?</p><p>Kind of work.</p><p>Different.</p><p>Okay, cool.</p><p>So our scan had finished anyway,so we can just cut that out and crap.</p><p>So we just got the MySQLon 3306 and the SSH.</p><p>So yeah.</p><p>All right, cool.</p><p>Okay, now we have ourlogin credentials work.</p><p>Let’s quit out of the section here.</p><p>So I’m just going to leave that inthe background and launch Metasploit.</p><p>So remember MSF console.</p><p>So we’re going to be usingMySQL underscore SQL module.</p><p>I’m just going to copy that and we’re</p><p>going to search for it and thensee if we can make sure if we’re going</p><p>to create a payload,we might be creating a payload to copy,</p><p>paste and execute hereto receive a reverse shell.</p><p>So we’ll see what the roomhas installed for us.</p><p>So when I search that, so we onlygot one option that matches it.</p><p>So we can copy that in and submit that.So we got that.</p><p>Cool.So hint is separated by things.</p><p>Yes.</p><p>So that’s not right.</p><p>So we don’t want the full auxiliary.</p><p>Is that what you’re after?</p><p>Okay, let’s just read this again.</p><p>Search for select list options.</p><p>What three options dowe need to set first?</p><p>Oh, sorry, it’s not asking us for that.</p><p>So let’s just use zero and let’sjust look up our options.</p><p>So we’ve got one, two, three.</p><p>So we’ve got our hosts.</p><p>We’re saying we might need to do other</p><p>ones like ourhosts password and then user.</p><p>Username.</p><p>That in order.</p><p>That was not in order.</p><p>Okay, so that’s what it wants.</p><p>Just sort of guessing there.</p><p>So we got to set the password,which we know is password when you set our</p><p>hosts IP,we don’t need to set the R port because</p><p>I assume that this is the default portjust because it’s the same here.</p><p>We don’t need to specify the versionof SQL even though it is required.</p><p>I guess there’s probably</p><p>let’s do this by specifying passwordand that will just be lower case password</p><p>and we’re going to set our hostand that’s going to be our IP.</p><p>So just paste that in to the system</p><p>that we’re looking at and then setuser name and that’s going to be root.</p><p>Okay, so we should just be able to go run.</p><p>But before I do that,</p><p>run the exploit by defaultto test with the select version command.</p><p>Wait.Did I misunderstand this?</p><p>Is this the SQL to execute?</p><p>I understand this is not asking</p><p>for a version, this is actuallyan SQL command that will be executed.</p><p>So if we run this, we should get back theversion that it’s running because it ran.</p><p>So we can essentially now run any SQL.</p><p>So we just need to find the right SQL.So what does it give us?</p><p>So it gave us this back.</p><p>Cool, great.</p><p>We know that our exploitis landing as planned.</p><p>Let’s try to gain someambitious information.</p><p>Change the SQL option to show databases,</p><p>set SQL to show databasesand then we’ll run it again.</p><p>And how many databases are returned?</p><p>So we’ve got 1234.</p><p>Cool.Let’s move over to our last task.</p><p>Task ten for exploitingMySQL So what do we know?</p><p>Let’s take a sanity check before movingon to try and exploit the database fully</p><p>and gain more sense of information on thedatabase than just the database names.</p><p>I just want to take a second because I do</p><p>really like how it’s sort ofbefore it’s teaching us</p><p>to really understand what we’redoing to enumerate and then exploit.</p><p>But I just like this last step before we</p><p>export exploit it’s just like justmake sure we’ve got everything.</p><p>I think this is going to be good foronce I’m more experienced down the track.</p><p>Just you get used to everything and it’sjust good to take your time, I guess.</p><p>MySQL server credentials.</p><p>So root password,the version of MySQL running.</p><p>So we’ve got that here.</p><p>And then the numberof databases and their names.</p><p>I’ve got idea.</p><p>So it’s probably I shouldreally be keeping a list.</p><p>Where is this?</p><p>So if we just change into documents here,</p><p>we might just create awhat did I call the last one?</p><p>I think I just call it MySQL Ssql.</p><p>And I’m just going to copysome of this information over.</p><p>So I should be doing thisa lot more basically.</p><p>But how do I undo?Was it alt?</p><p>Said no, can’t remember.</p><p>How alt a I can’t remember howto whatever, I’ll just leave it cool.</p><p>So that’s pretty much we need this.</p><p>And I mean, of course we’vegot root and then password.</p><p>I think I can remember that,but that’s kind of it.</p><p>So in my scale, physicallya schema is key terminology.</p><p>So we’re just goingto learn some key times.</p><p>Schema.</p><p>A schema is synonymous with the database.</p><p>You can substitute the keyword schemainstead of database in my SQL syntax,</p><p>for example, using create schemainstead of create database.</p><p>It’s important to understand</p><p>the relationship because some otherdatabases products draw a distinction.</p><p>For example, in the Oracle databaseproduct, a schema represents only a part</p><p>of a database, the tables and theobjects owned by a single user.</p><p>That’s really confusing.</p><p>I’ve never understoodschema, to be honest.</p><p>Like saying it’s like a database.</p><p>I’m like, okay, because I know like in SEO</p><p>world, like the Google and stuff, schemais important but never really got it.</p><p>Hashes.I have a little bit of understanding about</p><p>so very simple productof cryptographic algorithm.</p><p>A cryptographic algorithm to turn</p><p>a variable length into an inputfixed length output.</p><p>So in SQL, hashes can bevery in different ways.</p><p>For instance, an indexdata into a hash table.</p><p>Each unique hash has a unique ID thatserves as a pointer to the original data.</p><p>This creates an index that issignificantly smaller than the original</p><p>data, allowing the values to besearched and accessed more efficiently.</p><p>That’s interesting.</p><p>So I always associate hasheswith password, hashing and security.</p><p>But it also can just be used for a methodof searching and accessing efficiently.</p><p>However, the data we’re going to beextracting our password hashes,</p><p>which are simply a way of storingpasswords and not in plain text form.</p><p>Let’s start cracking.</p><p>All right, let’s searchfor my SQL schema dump module.</p><p>So we’ll go search paste that in there.</p><p>It should be the only one.</p><p>So we can just go use zero.</p><p>So we’ve selected our tool here, but it’sgoing to ask what is the full path?</p><p>We can just chuck that in there.</p><p>Great, now we’ve done a few times by now.</p><p>So let’s take it from here.</p><p>Set the relevant options, run the exploit.</p><p>What’s the name of the last database?</p><p>We don’t need to oh wait, no,it said set the relevant options.</p><p>Okay, so let’s have a set display.Results are true.</p><p>So we’re going to set password.</p><p>So that’s just going to be password set</p><p>our hosts, which is just goingto be our IP that we’re targeting.</p><p>And then set username,which is just going to be root.</p><p>That is our exploit machine set up.</p><p>So we can just hit run.</p><p>I guess schema dump is like database dump.</p><p>So it’s just going to try and findall the info from the databases.</p><p>What’s the name of the lasttable that gets dumped?</p><p>So when you’re looking for the last table</p><p>I don’t know if there’s likea verbose mode in Metasploit.</p><p>Going to save this off, by the way,</p><p>just so I got some stuff here.Yes.</p><p>Cool.Here we go.</p><p>Let’s have a good old scroll.</p><p>So there’s a lotI’m not going to scroll all the way</p><p>to the top, but we just wantthe name of the last table.</p><p>So table name.</p><p>So we’ve got here, I’m going to assume,</p><p>including X and paste that in therewaits global by latency.</p><p>So I have no idea whatthis SQL database is.</p><p>Awesome.</p><p>Now you have dumped tables and columns,names of the whole database.</p><p>But we can do better.</p><p>Let’s search and selectMySQL hash dump module.</p><p>Oh my gosh.</p><p>How many things are in thistool that we can use?</p><p>So what’s the module full name?</p><p>I’m sort of realizing there’sprobably like variables.</p><p>I keep seeing this.You can use variables.</p><p>I wonder if you can setlike a variable of IP.</p><p>So if I like, setour host to IP,</p><p>but I set this as my IP so I don’thave to copy paste this every time.</p><p>It’s probably much more efficient ways ofdoing everything that I do the wrong way.</p><p>Again.I’ll learn them eventually.</p><p>Again, I’ll let you take it from here.</p><p>Set the relevant options.</p><p>So let’s go up.</p><p>So we’ve got password.</p><p>So set password.</p><p>So that was password.</p><p>Cool.</p><p>Sorry.</p><p>What am I doing?</p><p>Set our host to this fella.</p><p>And then we want to setthe username username to root.</p><p>Cool.So that’s set up.</p><p>And then we should just be able to go run</p><p>and it’s going to say, cool,that was a lot faster.</p><p>So we’re getting users and hashes.</p><p>Well, that’s cool.</p><p>Hash dump is what?</p><p>Non default user stands out.</p><p>Carl.</p><p>Carl stands out.</p><p>So another user.</p><p>Another user.</p><p>Yeah, we got rudeand we have the password hash.</p><p>This could be very interesting.</p><p>Copy the hash to string,like full it’ll, copy this whole thing.</p><p>And we can just nano a fileand copy it in there.</p><p>But we can also echo this file.</p><p>Is that how that works?</p><p>That’s not how it works.</p><p>And paste it in here.</p><p>So we’ve got Carl and thenwe’ve got the hash.</p><p>So one is like bob and then the hash.</p><p>So we’ve got thatand I just called it hash.</p><p>Yeah.</p><p>So if we cut out hash, we’ve got this.</p><p>We’re going to use John the river.</p><p>So what is the user hash combination?</p><p>So we can justcopy that in there like so sweet.</p><p>Remember the hash col hash.Got it.</p><p>Okay, now we need to crack.</p><p>Let’s use John the Ripper against this.</p><p>It’s just saying John.</p><p>But I thought oh, really?</p><p>That was a lot easier.</p><p>I thought we need to use a wordlist.</p><p>I thought we needed to also usesomething else.</p><p>Cool.Awesome.</p><p>Password reuse is extremely dangerous,but extremely common.</p><p>What are the chances</p><p>that we can use a different service likeSSH because SSH was running.</p><p>So we can go Carl and we goat and we can log into this user.</p><p>Yes please.And then we can go.</p><p>D-O-G-G-I-E for doggie.</p><p>And we can log in, hopefully,</p><p>so we can cut out my SQL tax and wehave got our final flag puzzle.</p><p>Paste that in there and goover to task eleven.</p><p>We got some further reading, add to thelist and we can complete our final task.</p><p>Awesome.Good work.</p><p>We did it.Yeah.</p><p>So well done.Congrats.</p><p>That’s network services too.</p><p>We learned a lot from NFS SMTP to MySQL,</p><p>plus the Network Services one that we did,which is pretty awesome.</p><p>So lots of stuff here,so I hope you took some notes.</p><p>You’ve always got this videoto come back into if you’d like.</p><p>If you want to see more of this,please let me know.</p><p>Leave a comment if you want to subscribe.Awesome.</p><p>If you’d like to like the videoor dislike, totally up to you.</p><p>Either way, just let me know what you liketo dislike, would love some feedback.</p><p>If you have any comments that you like</p><p>to make, please go down below and there’llbe a playlist for all of my other</p><p>triathlon walkthroughs ifyou aren’t interested.</p><p>And don’t forget if you want a written</p><p>right up or you would like to subscribeto my newsletter,</p><p>I do have a good newsletter that I put outmonthly and that’ll be linked below too.</p><p>Cool.That being said, have a good day.</p><p>I’ll see you in the next one.</p><br><div class=gist-embed-form data-form-type=embedded data-form-id=1489913 data-workspace-id=aw3xhcat version=3></div><script type=text/javascript src=https://forms-widget.getgist.com/ defer></script></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=//localhost:1313/replit-edfest-2022-jam-intro-to-pyscript/><span class=title>« Prev</span><br><span>Replit EdFest 2022 Jam - Intro To PyScript</span>
</a><a class=next href=//localhost:1313/network-services-2-tryhackme-part-2-smtp/><span class=title>Next »</span><br><span>Network Services 2 TryHackMe Part 2 SMTP</span></a></nav></footer></article></main><footer class=footer><span>Made with ♥ from Australia</span> •
<span>&copy; 2017-2024 <a href=/policies>Policies</a><br>Site by <a href=//localhost:1313/>Mr Ash Co</a></span>
<span>• Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a>
x
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>